import{_ as p,r as o,o as c,c as l,a as n,d as e,F as i,b as s,e as t}from"./app.090844ca.js";const r={},u=n("h1",{id:"\u79BB\u5C4F\u753B\u5E03-offscreen-canvas",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u79BB\u5C4F\u753B\u5E03-offscreen-canvas","aria-hidden":"true"},"#"),s(" \u79BB\u5C4F\u753B\u5E03 Offscreen Canvas")],-1),d=n("nav",{class:"table-of-contents"},[n("ul")],-1),k=n("p",null,"\u79BB\u5C4F\u753B\u5E03 offscreen canvas \u662F\u4E00\u79CD\u53EF\u4EE5\u5728\u5C4F\u5E55\u5916\u548C\u4E0E\u4E3BUI\u7EBF\u7A0B\u4E0D\u540C\u7684\u7EBF\u7A0B\u4E0A\u8FDB\u884C\u6E32\u67D3\u7684\u753B\u5E03\u3002",-1),v=n("p",null,"\u5982\u679C\u4F60\u7684\u4E3B\u7EBF\u7A0B\u5DF2\u7ECF\u88AB\u5927\u91CF\u7528\u4E8E\u5176\u4ED6\u4EFB\u52A1\uFF0C\u8FD9\u6837\u505A\u53EF\u80FD\u771F\u7684\u5F88\u6709\u8DA3\u3002",-1),m=n("p",null,"\u4F60\u53EF\u4EE5\u5728\u8FD9\u91CC\u770B\u5230\u4E00\u4E2A\u6F14\u793A\u8FD9\u4E2A\u7528\u4F8B\u7684\u9875\u9762\uFF1Ahttps://www.babylonjs.com/Demos/Offscreen",-1),f={href:"https://youtu.be/zYrZNROQzKQ",target:"_blank",rel:"noopener noreferrer"},h=s("\u89C6\u9891\u6559\u7A0B"),b=t(`<p>\u4ECEBabylon.js v4.1\u5F00\u59CB\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7\u521D\u59CB\u5316\u4E00\u4E2A\u79BB\u5C4F\u753B\u5E03\u5728 worker \u5185\u90E8\u521B\u5EFA\u4E00\u4E2A\u5F15\u64CE\u3002</p><p>\u9996\u5148\uFF0C\u4F60\u9700\u8981\u4ECE\u4F60\u7684\u5E38\u89C4\u753B\u5E03\u4E2D\u521B\u5EFA\u4E00\u4E2A\u79BB\u5C4F\u753B\u5E03\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;renderCanvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> canvas<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> canvas<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
<span class="token keyword">var</span> offscreen <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">transferControlToOffscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u4F60\u9700\u8981\u5206\u79BB\u51FA\u4E00\u4E2A\u65B0\u7684worker\uFF0C\u5E76\u628A\u5B83\u53D1\u9001\u5230\u79BB\u5C4F\u753B\u5E03\u4E0A\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&quot;worker.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">canvas</span><span class="token operator">:</span> offscreen<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>offscreen<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>worker\u4EE3\u7801\u5C06\u76D1\u542C\u4F60\u7684\u6D88\u606F\uFF0C\u83B7\u5F97\u79BB\u5C4F\u753B\u5E03\uFF0C\u5E76\u4EE5\u5E38\u89C4\u65B9\u5F0F\u542F\u52A8babylon.js\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    canvas <span class="token operator">=</span> evt<span class="token punctuation">.</span>data<span class="token punctuation">.</span>canvas<span class="token punctuation">;</span>
    <span class="token keyword">var</span> engine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BABYLON<span class="token punctuation">.</span>Engine</span><span class="token punctuation">(</span>canvas<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Your scene setup here</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u4F60\u53EF\u4EE5\u6309\u5E38\u89C4\u65B9\u5F0F\u4F7F\u7528\u5F15\u64CE\u3002</p><p>\u5728\u5DE5\u4F5C\u7EBF\u7A0B\u4E2D\u4F7F\u7528Babylon.js\u7684\u79BB\u5C4F\u753B\u5E03\u7684\u4E3B\u8981\u6CE8\u610F\u4E8B\u9879\u662F\uFF0C\u4F60\u9700\u8981\u505A\u4E00\u4E9B\u7279\u6B8A\u7684\u5DE5\u4F5C\u6765\u4E0E\u4E3B\u7EBF\u7A0B\u7684\u5F15\u64CE\u8FDB\u884C\u901A\u4FE1\u3002\u4F60\u5C06\u4E0D\u5F97\u4E0D\u4F7F\u7528\u6211\u4EEC\u4E4B\u524D\u4F7F\u7528\u7684\u76F8\u540C\u7684\u6D88\u606F\u4F20\u9012API\u5728\u7EBF\u7A0B\u4E4B\u95F4\u8FDB\u884C\u901A\u4FE1\u3002</p><p>\u6B64\u5916\uFF0CBabylon.js\u5C06\u65E0\u6CD5\u4E3A\u4F60\u5904\u7406\u8F93\u5165\uFF0C\u56E0\u6B64\u50CF<code>camera.attachControls()</code>\u8FD9\u6837\u7684API\u5C06\u65E0\u6CD5\u5DE5\u4F5C\uFF0C\u4F60\u5C06\u4E0D\u5F97\u4E0D\u5411 worker \u4F20\u9012\u8F93\u5165\u4FE1\u606F\u3002</p><p>\u4E0B\u9762\u662F\u4E00\u4E2A\u901A\u4FE1\u7684\u4F8B\u5B50\uFF0C\u4F60\u5FC5\u987B\u8BBE\u7F6E\uFF0C\u4EE5\u652F\u6301\u753B\u5E03\u5927\u5C0F\u7684\u6539\u53D8\u3002</p><p>\u5728\u4E3B\u7EBF\u7A0B\u4E0A\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">width</span><span class="token operator">:</span> canvas<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span> <span class="token literal-property property">height</span><span class="token operator">:</span>canvas<span class="token punctuation">.</span>clientHeight<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728worker\u7EBF\u7A0B\u4E0A\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> engine<span class="token punctuation">;</span>
<span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>data<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> evt<span class="token punctuation">.</span>data<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
        canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> evt<span class="token punctuation">.</span>data<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,15),g=s("\u8BF7\u6CE8\u610F\uFF0C\u8FD9\u662F\u4E2A\u65B0\u529F\u80FD\uFF0C\u8FD8\u6CA1\u6709\u4E0E\u6BCF\u4E2A\u8BBE\u5907\u6216\u6D4F\u89C8\u5668\u517C\u5BB9\u3002\u4F60\u53EF\u4EE5\u5728\u8FD9\u91CC\u68C0\u67E5\u5F53\u524D\u5BF9\u79BB\u5C4F\u753B\u5E03\u7684\u652F\u6301\uFF1A"),_={href:"https://caniuse.com/#feat=offscreencanvas",target:"_blank",rel:"noopener noreferrer"},w=s("https://caniuse.com/#feat=offscreencanvas"),y=t(`<p>\u5982\u679C\u4F60\u60F3\u6D4B\u8BD5\u517C\u5BB9\u6027\uFF0C\u4F60\u53EF\u4EE5\u5728\u4F7F\u7528\u79BB\u5C4F\u753B\u5E03\u4E4B\u524D\u6DFB\u52A0\u8FD9\u4E2A\u6761\u4EF6\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;OffscreenCanvas&quot;</span> <span class="token keyword">in</span> window <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;transferControlToOffscreen&quot;</span> <span class="token keyword">in</span> canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// Ok to use offscreen canvas</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),j={href:"https://developer.mozilla.org/en-US/docs/Web/API/OffscreenCanvas",target:"_blank",rel:"noopener noreferrer"},x=s("https://developer.mozilla.org/en-US/docs/Web/API/OffscreenCanvas"),C={href:"https://developers.google.com/web/updates/2018/08/offscreen-canvas",target:"_blank",rel:"noopener noreferrer"},q=s("https://developers.google.com/web/updates/2018/08/offscreen-canvas");function O(B,I){const a=o("ExternalLinkIcon");return c(),l(i,null,[u,d,k,v,m,n("p",null,[n("a",f,[h,e(a)])]),b,n("p",null,[g,n("a",_,[w,e(a)])]),y,n("ul",null,[n("li",null,[n("a",j,[x,e(a)])]),n("li",null,[n("a",C,[q,e(a)])])])],64)}var N=p(r,[["render",O],["__file","offscreenCanvas.html.vue"]]);export{N as default};
