import{_ as s,c as e,o as a,a as l}from"./app.3a59851a.js";const C=JSON.parse('{"title":"发布桌面应用","description":"","frontmatter":{},"headers":[{"level":2,"title":"准备工作","slug":"准备工作","link":"#准备工作","children":[]},{"level":2,"title":"步骤","slug":"步骤","link":"#步骤","children":[{"level":3,"title":"1-打开命令行或终端","slug":"_1-打开命令行或终端","link":"#_1-打开命令行或终端","children":[]},{"level":3,"title":"2-创建electron项目","slug":"_2-创建electron项目","link":"#_2-创建electron项目","children":[]},{"level":3,"title":"3-发布桌面应用","slug":"_3-发布桌面应用","link":"#_3-发布桌面应用","children":[]}]},{"level":2,"title":"订制应用","slug":"订制应用","link":"#订制应用","children":[{"level":3,"title":"关闭开发者工具","slug":"关闭开发者工具","link":"#关闭开发者工具","children":[]},{"level":3,"title":"订制图标","slug":"订制图标","link":"#订制图标","children":[]}]}],"relativePath":"block3d/diving-deeper/desktop-apps.md"}'),n={name:"block3d/diving-deeper/desktop-apps.md"},t=l(`<h1 id="发布桌面应用" tabindex="-1">发布桌面应用 <a class="header-anchor" href="#发布桌面应用" aria-hidden="true">#</a></h1><p>本文介绍利用electron将Block3D应用发布为跨平台的桌面应用。跟着以下步骤，不需要写任何一行代码，只需复制、粘贴即可。</p><nav class="table-of-contents"><ul><li><a href="#准备工作">准备工作</a></li><li><a href="#步骤">步骤</a><ul><li><a href="#_1-打开命令行或终端">1-打开命令行或终端</a></li><li><a href="#_2-创建electron项目">2-创建electron项目</a></li><li><a href="#_3-发布桌面应用">3-发布桌面应用</a></li></ul></li><li><a href="#订制应用">订制应用</a><ul><li><a href="#关闭开发者工具">关闭开发者工具</a></li><li><a href="#订制图标">订制图标</a></li></ul></li></ul></nav><h2 id="准备工作" tabindex="-1">准备工作 <a class="header-anchor" href="#准备工作" aria-hidden="true">#</a></h2><ol><li>安装node.js（必须）</li></ol><p>从官网<a href="https://nodejs.org/" target="_blank" rel="noreferrer">https://nodejs.org/</a>下载最新长期维护版（LTS）node.js，安装过程略。</p><ol start="2"><li>安装vsCode代码编辑器（可选）</li></ol><p>从官网<a href="https://code.visualstudio.com/" target="_blank" rel="noreferrer">https://code.visualstudio.com/</a>下载vsCode。也可以使用其它代码编辑器。使用代码编辑器为了后续对桌面应用进行深度订制。</p><h2 id="步骤" tabindex="-1">步骤 <a class="header-anchor" href="#步骤" aria-hidden="true">#</a></h2><h3 id="_1-打开命令行或终端" tabindex="-1">1-打开命令行或终端 <a class="header-anchor" href="#_1-打开命令行或终端" aria-hidden="true">#</a></h3><ul><li>windows系统在资源管理器的地址栏输入<code>cmd</code>，按回车打开命令行工具</li><li>macOS从应用中打开终端，或者通过聚集搜索“终端”找到并打开</li></ul><h3 id="_2-创建electron项目" tabindex="-1">2-创建electron项目 <a class="header-anchor" href="#_2-创建electron项目" aria-hidden="true">#</a></h3><p>创建项目之前，为了保证安装速度，可以通过修改环境变量设置为国内的安装镜像。</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ELECTRON_MIRROR</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://npmmirror.com/mirrors/electron/</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>windows系统从“我的电脑”右键菜单“属性”，打开“系统属性”面板，选择“高级”，打开“环境变量”，新建变量“ELECTRON_MIRROR”，值为“<a href="https://npmmirror.com/mirrors/electron/%E2%80%9D%E3%80%82" target="_blank" rel="noreferrer">https://npmmirror.com/mirrors/electron/”。</a></p><p>macOS在终端执行：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> ELECTRON_MIRROR</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://npmmirror.com/mirrors/electron/</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><blockquote><p>在终端执行<code>env</code>查看所有环境变量，确保设置成功。</p></blockquote><p>创建electron项目，在命令行或终端执行：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">init</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">electron-app@latest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">my-app</span></span>
<span class="line"></span></code></pre></div><p>执行命令后将在当前路径下创建<code>my-app</code>文件夹，并安装依赖。等待依赖安装完成，继续下一步。</p><h3 id="_3-发布桌面应用" tabindex="-1">3-发布桌面应用 <a class="header-anchor" href="#_3-发布桌面应用" aria-hidden="true">#</a></h3><p>首先，在Block3D中完成发布，将<code>index.html</code>和<code>assets</code>文件夹复制到<code>my-app/src</code>文件夹下，该文件夹下已有<code>index.html</code>，覆盖它即可。</p><p>然后，将工作路径切换到<code>my-app</code>，在命令行或终端执行：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">my-app</span></span>
<span class="line"></span></code></pre></div><p>最后，执行发布命令：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">publish</span></span>
<span class="line"></span></code></pre></div><p>发布的桌面应用位于<code>my-app/out</code>。</p><h2 id="订制应用" tabindex="-1">订制应用 <a class="header-anchor" href="#订制应用" aria-hidden="true">#</a></h2><h3 id="关闭开发者工具" tabindex="-1">关闭开发者工具 <a class="header-anchor" href="#关闭开发者工具" aria-hidden="true">#</a></h3><p>默认开发者工具是打开的，要关闭它，用代码编辑器打开<code>my-app/src/index.js</code>，找到代码:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">mainWindow</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">webContents</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">openDevTools</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>将其删除或注释掉即可。</p><h3 id="订制图标" tabindex="-1">订制图标 <a class="header-anchor" href="#订制图标" aria-hidden="true">#</a></h3><p>支持的图标格式：</p><table><thead><tr><th style="text-align:left;">操作系统</th><th style="text-align:left;">格式</th><th style="text-align:left;">尺寸</th></tr></thead><tbody><tr><td style="text-align:left;">macOS</td><td style="text-align:left;">.icns</td><td style="text-align:left;">512*512px(1024*1024Retina屏)</td></tr><tr><td style="text-align:left;">Windows</td><td style="text-align:left;">.ico</td><td style="text-align:left;">512*512px</td></tr></tbody></table><p>用代码编辑器打开<code>my-app/forge.config.js</code>，指定图标路径。假设图标位于<code>my-app/images</code>文件夹下：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">packagerConfig</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">icon</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/images/icon</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 无需扩展名</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><blockquote><p>参考：<a href="https://www.electronforge.io/guides/create-and-add-icons" target="_blank" rel="noreferrer">https://www.electronforge.io/guides/create-and-add-icons</a></p></blockquote>`,39),o=[t];function p(c,r,i,d,h,y){return a(),e("div",null,o)}const u=s(n,[["render",p]]);export{C as __pageData,u as default};
